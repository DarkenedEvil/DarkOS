os.pullEvent = os.pullEventRaw

local tArgs = {...}
if #tArgs < 1 then
	error("Expected Username but got less. Please report this to DarkenedEvil.")
end
if #tArgs > 1 then
	error("Expected Username but got more! Please report this to DarkenedEvil")
end

term.clear()
term.setCursorPos(1,1)
print("Welcome to your Home Screen!")
print("Here you can choose what to do.")
print("What would you like to do?")
print("[1]Run a program?")
print("[2]Make a program?")
print("[3]Edit a program?")
print("[4]Look at apis?")
print("[5]Logout?")
print("[6]User controls?")
print("[7]Check for an update?")
print("[8]Uninstall DarkOS?")
write("> ")
local input = read()
if input == "1" then
	term.clear()
	term.setCursorPos(1,1)
	local uprograms = fs.list("/programs")
	local programs = shell.programs()
	print("ComputerCraft programs: ")
	print(" ")
	textutils.pagedTabulate(programs)
	print(" ")
	print("User-Made programs: ")
	print(" ")
	textutils.pagedTabulate(uprograms)
	print(" ")
	print("Please type in the program you would like to run")
	write("> ")
	local runprog = read()
	os.run({}, runprog)
	DOS.rawread("admin")
	elseif input == "2" then
	term.clear()
	term.setCursorPos(1,1)
	print("Please type the name of the program you would like to make.")
	write("> ")
	local program_name = read()
	os.run({},"edit", "/programs/"..program_name)
	DOS.rawread("admin")
	elseif input == "3" then
	term.clear()
	term.setCursorPos(1,1)
	print("Type in the programs name you would like to edit.")
	write("> ")
	local edit_name = read()
	os.run({},"edit", edit_name)
	DOS.rawread("admin")
	elseif input == "4" then
	term.clear()
	term.setCursorPos(1,1)
	local papis = shell.run("apis")
	textutils.pagedTabulate(papis)
	DOS.rawread("admin")
	elseif input == "5" then
	os.reboot()
	elseif input == "6" then
	os.run({}, "usercontrol", tArgs[1])				
	elseif input == "7" then
	term.clear()
	term.setCursorPos(1,1)
	print("Checking for update. Please wait")
	sleep(1)
	shell.run("pastebin", "get", "CY7wfEmr", "Tempinfo")
	z = fs.open("Tempinfo", "r")
	version = z:readAll()
	z:close()
	x = fs.open("info", "r")
	currentver = x:readAll()
	x:close()
	if currentver < version then
		print("Your OS is out of date! Would you like to update?")
		print("[1] Yes")
		print("[2] No")
		write("> ")
		local checkup = read()
		if checkup == "1" then
			fs.delete("Tempinfo")
			shell.run("/programs/update")
			elseif checkup == "2" then
			fs.delete("Tempinfo")
			DOS.rawread("admin")
			else
			print("Please select 1 or 2!")
			fs.delete("Tempinfo")
			DOS.rawread("admin")
			end
		else
		term.clear()
		term.setCursorPos(1,1)
		print("You are up to date!")
		fs.delete("Tempinfo")
		DOS.rawread("admin")
		end
	elseif input == "8" then
	os.run({}, "uninstall")
  	else
	print("Invalid command please select 1-8.")
	DOS.rawread("admin", tArgs[1])
	end
	DOS.rawread("admin", tArgs[1])